{% extends "base.html" %}

{% block content %}
    <h1 class="ui header">最新文章</h1>
    <div class="ui relaxed divided items">
        {% for post in posts %}
            <div class="item">
                <div class="content">
                    <a class="header" href="{{ url_for('view_post', id=post.id) }}">{{ post.title }}</a>
                    <div class="meta">
                        <span class="date">发布于: {{ post.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
                    </div>
                    <div class="description">
                        <p>{{ post.content[:200] }}{% if post.content|length > 200 %}...{% endif %}</p>
                    </div>
                    <div class="extra">
                        {% if current_user.is_authenticated %}
                            <a class="ui right floated tiny primary button" href="{{ url_for('edit_post', id=post.id) }}">
                                <i class="edit icon"></i>编辑
                            </a>
                        {% endif %}
                        <a class="ui right floated tiny basic button" href="{{ url_for('view_post', id=post.id) }}">
                            阅读全文
                            <i class="right chevron icon"></i>
                        </a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
